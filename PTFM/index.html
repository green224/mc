<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>üê∞</title>
	<link rel="stylesheet" href="TemplateData/style.css">
	<link rel="apple-touch-icon" type="image/png" href="icons/apple-touch-icon-180x180.png">
	<link rel="icon" type="image/png" href="icons/icon-192x192.png">
</head>
<body>
	<div id="unity-container" class="unity-desktop">
	<canvas id="unity-canvas" width=960 height=600></canvas>
	<div id="unity-loading-bar">
		<div id="main-logo"></div>
		<div id="unity-progress-bar-empty">
		<div id="unity-progress-bar-full"></div>
		</div>
	</div>
	<div id="info-container">
		<div id="info-control"></div>
		<div id="info-footer">
			- alpha 0.0001 - <a href="licenses.html" target="blank">LICENSES</a> -
		</div>
	</div>
	</div>
	<script>
	var buildUrl = "Build";
	var loaderUrl = buildUrl + "/webgl.loader.js";
	var config = {
		dataUrl: buildUrl + "/webgl.data.unityweb",
		frameworkUrl: buildUrl + "/webgl.framework.js.unityweb",
		codeUrl: buildUrl + "/webgl.wasm.unityweb",
		streamingAssetsUrl: "StreamingAssets",
		companyName: "Olyester",
		productName: "PoteMirror",
		productVersion: "0.1",
	};

	var container = document.querySelector("#unity-container");
	var canvas = document.querySelector("#unity-canvas");
	var loadingBar = document.querySelector("#unity-loading-bar");
	var progressBarFull = document.querySelector("#unity-progress-bar-full");
	var infoContainer = document.querySelector("#unity-progress-bar-full");

	loadingBar.style.display = "block";

//	// PC„ÅÆÂ†¥Âêà„ÅØ„ÄÅPixelË°®Á§∫„Çµ„Ç§„Ç∫„Çípixel perfect„Å´„Åô„Çã
//	if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
//	} else {
//		config.matchWebGLToCanvasSize = true;
//		config.devicePixelRatio = 1;
//	}

	// „Éñ„É©„Ç¶„Ç∂„Çµ„Ç§„Ç∫„Å´Âêà„Çè„Åõ„Å¶Canvas„Çí„É™„Çµ„Ç§„Ç∫„Åô„ÇãÂá¶ÁêÜ
	let resize = () => {
		let w = window.innerWidth * window.devicePixelRatio * 0.9;
		let h = window.innerHeight * window.devicePixelRatio * 0.8;
		h = Math.min(w, h);
		if ( 1 < Math.abs(canvas.width-w) || 1 < Math.abs(canvas.height-h) ) {
			canvas.width = w;
			canvas.height = h;
			infoContainer.width = w;
		}
	};
	resize();

	{// „Éñ„É©„Ç¶„Ç∂„Çµ„Ç§„Ç∫„ÅÆÂ§âÊõ¥„ÇíÂÆöÊúüÁöÑ„Å´„ÉÅ„Çß„ÉÉ„ÇØ„Åô„Çã
		let timer = 0;
		window.onresize = () => {
			if (timer > 0) clearTimeout(timer);
			timer = setTimeout( ()=>{resize();}, 200 );
		};
	}

	// Unity„ÇíÈñãÂßã
	var script = document.createElement("script");
	script.src = loaderUrl;
	script.onload = () => {
		createUnityInstance(canvas, config, (progress) => {
		progressBarFull.style.width = 100 * progress + "%";
		}).then((unityInstance) => {
		loadingBar.style.display = "none";
		}).catch((message) => {
		alert(message);
		});
	};
	document.body.appendChild(script);


	</script>
</body>
</html>
